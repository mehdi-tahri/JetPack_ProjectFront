"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var jest_1 = require("jest");
var plugin_1 = require("@stryker-mutator/api/plugin");
var JestPromiseTestAdapter = /** @class */ (function () {
    function JestPromiseTestAdapter(log) {
        this.log = log;
    }
    JestPromiseTestAdapter.prototype.run = function (jestConfig, projectRoot, fileNameUnderTest) {
        jestConfig.reporters = [];
        var config = JSON.stringify(jestConfig);
        this.log.trace("Invoking Jest with config " + config);
        if (fileNameUnderTest) {
            this.log.trace("Only running tests related to " + fileNameUnderTest);
        }
        return jest_1.runCLI(tslib_1.__assign({}, (fileNameUnderTest && { _: [fileNameUnderTest], findRelatedTests: true }), { config: config, runInBand: true, silent: true }), [projectRoot]);
    };
    JestPromiseTestAdapter.inject = plugin_1.tokens(plugin_1.commonTokens.logger);
    return JestPromiseTestAdapter;
}());
exports.default = JestPromiseTestAdapter;
//# sourceMappingURL=JestPromiseTestAdapter.js.map